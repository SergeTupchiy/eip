@startuml
!theme blueprint
Client -> Server: PUBLISH('$file/{fileId}/{sha256}')
note right
Header/Packet Identifier: 3
Payload: <binary blob 1kB>
end note
Server -> Cache: store {filepath}/{filename} at 3072, 1kB
Cache --> Server: ok
Server --> Client: PUBACK 0x00, Packet Identifier: 3
Client -> Server: PUBLISH('$file/{fileId}/abort')
Server -> Cache: delete {filepath}/{filename}
Cache --> Server: ok
Server --> Client: PUBACK 0x00
@enduml
